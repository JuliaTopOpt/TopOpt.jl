<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Problem types · TopOpt.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TopOpt.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li class="is-active"><a class="tocitem" href>Problem types</a><ul class="internal"><li><a class="tocitem" href="#Continuum-problems"><span>Continuum problems</span></a></li><li><a class="tocitem" href="#Truss-problems"><span>Truss problems</span></a></li></ul></li><li><a class="tocitem" href="../../functions/">Functions</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../simp/">SIMP example: Point Load Cantilever</a></li><li><a class="tocitem" href="../beso/">BESO example: HalfMBB Beam</a></li><li><a class="tocitem" href="../geso/">GESO example: HalfMBB Beam</a></li><li><a class="tocitem" href="../csimp/">Continuous SIMP example</a></li><li><a class="tocitem" href="../global_stress/">Global stress objective example</a></li><li><a class="tocitem" href="../TOBS/">Topological optimization of binary structures (TOBS)</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../../reference/TopOptProblems/"><code>TopOptProblems</code></a></li><li><a class="tocitem" href="../../reference/Algorithms/"><code>Algorithms</code></a></li></ul></li><li><a class="tocitem" href="../../bibliography/">Bibliography</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Problem types</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Problem types</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/master/docs/src/literate/problem.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Problem-domain-definition"><a class="docs-heading-anchor" href="#Problem-domain-definition">Problem domain definition</a><a id="Problem-domain-definition-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-domain-definition" title="Permalink"></a></h1><p>In this section, the syntax to construct multiple problem types will be shown. In <code>TopOpt.jl</code>, there are a number of standard topology optimization problem domains that can be defined using a few lines of code. This is for the convenience of testing and comparing algorithms and formulations on standard testing problems.</p><h2 id="Continuum-problems"><a class="docs-heading-anchor" href="#Continuum-problems">Continuum problems</a><a id="Continuum-problems-1"></a><a class="docs-heading-anchor-permalink" href="#Continuum-problems" title="Permalink"></a></h2><h3 id="D-and-3D-point-load-cantilever-beam"><a class="docs-heading-anchor" href="#D-and-3D-point-load-cantilever-beam">2D and 3D point load cantilever beam</a><a id="D-and-3D-point-load-cantilever-beam-1"></a><a class="docs-heading-anchor-permalink" href="#D-and-3D-point-load-cantilever-beam" title="Permalink"></a></h3><p><img src="https://user-images.githubusercontent.com/19524993/165186251-f26e9dbc-a224-4fa0-b0c6-d0210a00d426.jpg" alt="cantilever"/></p><p>In this problem, the domain is divided into equally sized rectangular, quadrilateral elements. The number of elements (<code>nels</code>) and element sizes (<code>elsizes</code>) can be used to control the resolution of the problem&#39;s domain as well as its dimension. For instance, using <code>nels = (160, 40)</code> and <code>elsizes = (1.0, 1.0)</code> constructs a 2D problem domain of size 160 mm x 40 mm problem domain where each element is 1 mm x 1 mm. While <code>nels = (160, 40, 40)</code> and <code>elsizes = (1.0, 1.0, 2.0)</code> constructs a 3D problem domain of size 160 mm x 40 mm x 40 mm where each element is 1 mm x 1 mm x 2 mm.</p><p>Additionally, the Young’s modulus, Poisson’s ratio and downward force magnitude. Finally, the order of the geometric and field shape functions can be specified using either <code>:Linear</code> or <code>:Quadratic</code> as shown below.</p><pre><code class="language-julia hljs">using TopOpt

E = 1.0 # Young’s modulus in MPa
ν = 0.3 # Poisson’s ratio
f = 1.0 # downward force in N - negative is upward
nels = (160, 40) # number of elements
elsizes = (1.0, 1.0) # the size of each element in mm
order = :Linear # shape function order
problem = PointLoadCantilever(Val{order}, nels, elsizes, E, ν, f)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"></code></pre><h3 id="D-and-3D-half-Messerschmitt–Bolkow–Blohm-(MBB)-beam-problem"><a class="docs-heading-anchor" href="#D-and-3D-half-Messerschmitt–Bolkow–Blohm-(MBB)-beam-problem">2D and 3D half Messerschmitt–Bolkow–Blohm (MBB) beam problem</a><a id="D-and-3D-half-Messerschmitt–Bolkow–Blohm-(MBB)-beam-problem-1"></a><a class="docs-heading-anchor-permalink" href="#D-and-3D-half-Messerschmitt–Bolkow–Blohm-(MBB)-beam-problem" title="Permalink"></a></h3><p><img src="https://user-images.githubusercontent.com/19524993/165186211-3bfe26d8-82c9-4ae4-a37d-baa03d19b47c.jpg" alt="halfmbb"/></p><p>A similar problem type exists for the well known half MBB problem shown above. The constructor and parameters are similar to that of the point load cantilever beam. Also 2D and 3D variants exist by changing the lengths of <code>nels</code> and <code>elsizes</code>.</p><pre><code class="language-julia hljs">E = 1.0 # Young’s modulus in MPa
ν = 0.3 # Poisson’s ratio
f = 1.0 # downward force in N - negative is upward
nels = (60, 20) # number of elements
elsizes = (1.0, 1.0) # the size of each element in mm
order = :Quadratic # shape function order
problem = HalfMBB(Val{order}, nels, elsizes, E, ν, f)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"></code></pre><h3 id="D-L-beam-problem"><a class="docs-heading-anchor" href="#D-L-beam-problem">2D L-beam problem</a><a id="D-L-beam-problem-1"></a><a class="docs-heading-anchor-permalink" href="#D-L-beam-problem" title="Permalink"></a></h3><p><img src="https://user-images.githubusercontent.com/19524993/165194043-e2f1b4f2-940a-478d-ac94-4399e1524a81.jpg" alt="lbeam"/></p><p>The L-beam is another well known testing problem in topology optimization available in <code>TopOpt.jl</code>. To construct an L-beam problem, you can use the following constructor. The L-beam problem is only a 2D problem.</p><pre><code class="language-julia hljs">E = 1.0 # Young’s modulus in MPa
ν = 0.3 # Poisson’s ratio
f = 1.0 # downward force in N - negative is upward
order = :Quadratic # shape function order
problem = LBeam(
    Val{order}; length=100, height=100, upperslab=50, lowerslab=50, E=1.0, ν=0.3, force=1.0
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"></code></pre><p>where <code>E</code>, <code>ν</code> and <code>force</code> are the Young&#39;s modulus, Poisson&#39;s ratio and downward force respectively. The definition of <code>length</code>, <code>height</code>, <code>upperslab</code> and <code>lowerslab</code> are shown below. Each element is assumed to be a 1 mm x 1 mm element. The load is always applied at the midpoint of the &quot;lowerslab&quot; side. A positive value for the force is downward and a negative value is upward.</p><pre><code class="nohighlight hljs">        upperslab
       ............
       .          .
       .          .
       .          .
height .          .
       .          ......................
       .                               .
       .                               . lowerslab
       .                               .
       .................................
                    length
</code></pre><h3 id="D-tie-beam-problem"><a class="docs-heading-anchor" href="#D-tie-beam-problem">2D tie-beam problem</a><a id="D-tie-beam-problem-1"></a><a class="docs-heading-anchor-permalink" href="#D-tie-beam-problem" title="Permalink"></a></h3><p><img src="https://user-images.githubusercontent.com/19524993/165222174-927bfb06-ee6a-4eb0-b1df-4a32aa1474d5.png" alt="tiebeam"/></p><p>The tie-beam problem shown above is a well-known problem in topology optimization literature. A distributed load of 1 N/mm is applied on the elements specified in the figure. To construct an instance of the tie-beam problem for a certain order of shape functions, you can use:</p><pre><code class="language-julia hljs">order = :Quadratic # shape function order
problem = TieBeam(Val{order})</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"></code></pre><p>The tie-beam problem only exists as a 2D problem.</p><h3 id="Reading-INP-files"><a class="docs-heading-anchor" href="#Reading-INP-files">Reading INP files</a><a id="Reading-INP-files-1"></a><a class="docs-heading-anchor-permalink" href="#Reading-INP-files" title="Permalink"></a></h3><p>Instead of defining a problem type programmatically, one can also use CAD/CAE software to define a 2D/3D problem domain using a graphical user interface and then export a .inp file from the CAD/CAE software. The .inp file can then be read into TopOpt.jl using:</p><pre><code class="language-julia hljs">filename = &quot;../data/problem.inp&quot; # path to inp file
problem = InpStiffness(filename);</code></pre><p>For example, the following problem with fixed load, distributed loads and tetrahedral elements was defined usign FreeCAD and imported into TopOpt.jl to perform topology optimization. More information on how to specify the supports and loads in FreeCAD can be found in the webpage of FreeCAD&#39;s <a href="https://wiki.freecad.org/FEM_Workbench">FEM Workbench</a>.</p><p><img src="https://user-images.githubusercontent.com/19524993/165223774-2705347e-369f-463e-80f5-4e30093251c1.PNG" alt="inpfile"/></p><h2 id="Truss-problems"><a class="docs-heading-anchor" href="#Truss-problems">Truss problems</a><a id="Truss-problems-1"></a><a class="docs-heading-anchor-permalink" href="#Truss-problems" title="Permalink"></a></h2><h3 id="D-and-3D-truss-problem-from-json-file"><a class="docs-heading-anchor" href="#D-and-3D-truss-problem-from-json-file">2D and 3D truss problem from json file</a><a id="D-and-3D-truss-problem-from-json-file-1"></a><a class="docs-heading-anchor-permalink" href="#D-and-3D-truss-problem-from-json-file" title="Permalink"></a></h3><p>Data for constructing a 2D/3D truss problems can be imported from a json file:</p><pre><code class="language-julia hljs">path_to_file = &quot;../data/tim_2d.json&quot; # path to json file
mats = TrussFEAMaterial(10.0, 0.3) # Young’s modulus and Poisson’s ratio
crossecs = TrussFEACrossSec(800.0) # Cross-sectional area
node_points, elements, _, _, fixities, load_cases = load_truss_json(path_to_file)
loads = load_cases[&quot;0&quot;]
problem = TrussProblem(Val{:Linear}, node_points, elements, loads, fixities, mats, crossecs);</code></pre><p>The structure of the JSON file can be parsed to a dictionary using the code below.</p><pre><code class="language-julia hljs">using JSON
f = JSON.parsefile(path_to_file)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, Any} with 15 entries:
  &quot;node_num&quot;      =&gt; 19
  &quot;elements&quot;      =&gt; Any[Dict{String, Any}(&quot;end_node_inds&quot;=&gt;Any[0, 2], &quot;elem_ta…
  &quot;materials&quot;     =&gt; Any[Dict{String, Any}(&quot;family&quot;=&gt;&quot;DummyMaterial&quot;, &quot;E_unit&quot;=…
  &quot;loadcases&quot;     =&gt; Dict{String, Any}(&quot;1&quot;=&gt;Dict{String, Any}(&quot;lc_ind&quot;=&gt;1, &quot;plo…
  &quot;cross_secs&quot;    =&gt; Any[Dict{String, Any}(&quot;name&quot;=&gt;&quot;&quot;, &quot;A&quot;=&gt;1.0, &quot;family&quot;=&gt;&quot;Dum…
  &quot;element_num&quot;   =&gt; 42
  &quot;supports&quot;      =&gt; Any[Dict{String, Any}(&quot;condition&quot;=&gt;Any[1, 1], &quot;node_ind&quot;=&gt;…
  &quot;_info&quot;         =&gt; &quot;TTObuckling example used in PENLAB.&quot;
  &quot;TO_model_type&quot; =&gt; &quot;ground_mesh&quot;
  &quot;dimension&quot;     =&gt; 2
  &quot;nodes&quot;         =&gt; Any[Dict{String, Any}(&quot;point&quot;=&gt;Any[0, 0], &quot;node_ind&quot;=&gt;0), …
  &quot;unit&quot;          =&gt; &quot;meter&quot;
  &quot;generate_time&quot; =&gt; &quot;05/21/2019 07:40:59&quot;
  &quot;model_name&quot;    =&gt; &quot;tim&quot;
  &quot;model_type&quot;    =&gt; &quot;truss&quot;</code></pre><p>The JSON file contains important information for nodal geometry, element connectivity, supports, materials, and cross sections, where every key is a string, and the corresponding value can be a single number, dictionary of values, or a list of dictionary.</p><p>⚠️ Be careful that unlike the normal one-indexed convention used in Julia, <strong>all the index information in the JSON file starts from ZERO</strong>. This is just a choice out of convenience, because some of the developers use python in their CAD software to generate these JSONs.</p><p>The MUST-HAVE key-value pairs of the JSON are:</p><pre><code class="nohighlight hljs">  &quot;dimension&quot;     : model dimension (2 or 3)
  &quot;node_num&quot;      : total number of nodes (::Int)
  &quot;element_num    : total number of elements (::Int)
  &quot;nodes&quot; : a list of dictionaries, where each dict is structured as followed
          {
              &quot;node_ind&quot; : index of a node, starts from 0.
              &quot;points&quot; : a list of x,y,z coordinate of the node (Float)
                  [x , y , z] (or [x, y] if dimension=2)
          }
  &quot;elements&quot; : a list of dictionaries, where each dict is structured as followed
          {
              &quot;end_node_inds&quot; : [
                    start node index, end node index in Int (zero-indexed!)
                 ],
              &quot;elem_tag&quot; : tag of your element in string to link
                  to its corresponding material and cross section, e.g. `steel_set1`
          }
  &quot;supports&quot; : a list of dictionaries, where each dict is structured as followed
         {
          &quot;node_ind&quot;: 0,
          &quot;condition&quot;: a boolean list marking the fixed dofs, [tx,ty] for 2D,
             [tx,ty,tz] for 3D
          }
  &quot;loadcases&quot; : a dictionary of load cases that maps a load case index to a dictionary
          { &quot;0&quot;:
              {
                &quot;lc_ind&quot; : 0,  #(same as the load case index 0)
                &quot;ploads&quot; : [#a list of dictionaries for each load
                        {
                            &quot;node_ind&quot; : node index where the point load is applied
                            &quot;force&quot; : a list of force magitude along x y z axis
                                    [x,y,z] (or [x,y] for 2D)
                            &quot;loadcase&quot; : 0  (same as lc_ind)
                        }
              }
          }
  &quot;materials&quot; : a list of dictionaries, where each dict is structured as followed
        {
         &quot;name&quot;: material name in string,
         &quot;elem_tags&quot;: a list of element tags to which the material is applied, e.g. `steel_set1`,
         &quot;E&quot;: Young&#39;s modulus
         &quot;G12&quot;: in-plane shear modulus, not used for truss models now
         &quot;density&quot;: material density, not used now
        }
  &quot;cross_secs&quot; : a list of dictionaries, where each dict is structured as followed
        {
         &quot;name&quot;: cross section name in string,
         &quot;elem_tags&quot;: [],
         &quot;A&quot;: 1.0, # cross section area
        }</code></pre><p>When parsed by the <code>load_truss_json</code> function, materials and cross sections with <code>element_tags = []</code> will be treated as the fallback material or cross section for elements with an empty <code>elem_tag</code> (<code>&quot;&quot;</code>)</p><p>The following entries are optional for providing additional information about the model:</p><pre><code class="nohighlight hljs">  &quot;unit&quot;          : &quot;meter&quot;
  &quot;model_type&quot;    : &quot;truss&quot;
  &quot;generate_time&quot; :  generated date-time in string
  &quot;TO_model_type&quot; : &quot;ground_mesh&quot;
  &quot;model_name&quot;    : &quot;NameOfYourModel&quot;
  &quot;_info&quot;         : &quot;AdditionalInfo&quot;</code></pre><h3 id="D-and-3D-truss-point-load-cantilever-beam"><a class="docs-heading-anchor" href="#D-and-3D-truss-point-load-cantilever-beam">2D and 3D truss point load cantilever beam</a><a id="D-and-3D-truss-point-load-cantilever-beam-1"></a><a class="docs-heading-anchor-permalink" href="#D-and-3D-truss-point-load-cantilever-beam" title="Permalink"></a></h3><p><img src="https://user-images.githubusercontent.com/19524993/165228327-def94c04-6505-4f13-afea-4f28a370380e.png" alt="truss_cantilever"/></p><p>Much like the continuum 2D/3D point load cantilever beam, you can also create a 2D/3D truss-based cantilever beam with a point load as shown above using the following syntax.</p><pre><code class="language-julia hljs">E = 1.0 # Young’s modulus in MPa
ν = 0.3 # Poisson’s ratio
nels = (60, 20) # number of boundary trusses
elsizes = (1.0, 1.0) # the length of each boundary truss in mm
force = 1.0 # upward force in N - negative is downward
problem = PointLoadCantileverTruss(nels, elsizes, E, ν, force; k_connect=1);</code></pre><p><code>nels</code>, <code>elsizes</code>, <code>E</code> and <code>ν</code> have an analagous intepretation to the continuum cantilever beam. <code>force</code> is the upward concentrated force in Newton (downward is negative). <code>k_connect</code> is the k-ring of each node defining the connectivity of the nodes in the graph, default is 1. For a 2D domain, a node will be connected to <code>8</code> neighboring nodes if <code>k_connect = 1</code>, and <code>8 + 16 = 24</code> neighboring nodes if <code>k_connect = 2</code>.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../../functions/">Functions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 15 June 2023 19:44">Thursday 15 June 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
