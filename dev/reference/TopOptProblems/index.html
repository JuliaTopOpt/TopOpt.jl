<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>TopOptProblems · TopOpt.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TopOpt.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/simp/">SIMP example: Point Load Cantilever</a></li><li><a class="tocitem" href="../../examples/beso/">BESO example: HalfMBB Beam</a></li><li><a class="tocitem" href="../../examples/geso/">GESO example: HalfMBB Beam</a></li><li><a class="tocitem" href="../../examples/csimp/">Continuous SIMP example</a></li><li><a class="tocitem" href="../../examples/global_stress/">Global stress objective example</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li class="is-active"><a class="tocitem" href><code>TopOptProblems</code></a><ul class="internal"><li><a class="tocitem" href="#Problem-types"><span>Problem types</span></a></li><li><a class="tocitem" href="#Grids"><span>Grids</span></a></li><li><a class="tocitem" href="#Finite-element-backend"><span>Finite element backend</span></a></li><li><a class="tocitem" href="#Matrices-and-vectors"><span>Matrices and vectors</span></a></li></ul></li><li><a class="tocitem" href="../Algorithms/"><code>Algorithms</code></a></li></ul></li><li><a class="tocitem" href="../../bibliography/">Bibliography</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API Reference</a></li><li class="is-active"><a href><code>TopOptProblems</code></a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href><code>TopOptProblems</code></a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/master/docs/src/reference/TopOptProblems.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="TopOptProblems"><a class="docs-heading-anchor" href="#TopOptProblems"><code>TopOptProblems</code></a><a id="TopOptProblems-1"></a><a class="docs-heading-anchor-permalink" href="#TopOptProblems" title="Permalink"></a></h1><p>This sub-module of <code>TopOpt</code> defines a number of standard topology optimization problems for the convenient testing of algorithms.</p><h2 id="Problem-types"><a class="docs-heading-anchor" href="#Problem-types">Problem types</a><a id="Problem-types-1"></a><a class="docs-heading-anchor-permalink" href="#Problem-types" title="Permalink"></a></h2><h3 id="Abstract-type"><a class="docs-heading-anchor" href="#Abstract-type">Abstract type</a><a id="Abstract-type-1"></a><a class="docs-heading-anchor-permalink" href="#Abstract-type" title="Permalink"></a></h3><p><code>StiffnessTopOptProblem</code> is an abstract type that a number of linear elasticity, quasi-static, topology optimization problems subtype.</p><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.StiffnessTopOptProblem" href="#TopOpt.TopOptProblems.StiffnessTopOptProblem"><code>TopOpt.TopOptProblems.StiffnessTopOptProblem</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">abstract type StiffnessTopOptProblem{dim, T} &lt;: AbstractTopOptProblem end</code></pre><p>An abstract stiffness topology optimization problem. All subtypes must have the following fields:</p><ul><li><code>ch</code>: a <code>Ferrite.ConstraintHandler</code> struct</li><li><code>metadata</code>: Metadata having various cell-node-dof relationships</li><li><code>black</code>: a <code>BitVector</code> of length equal to the number of elements where <code>black[e]</code> is 1 iff the <code>e</code>^th element must be part of the final design</li><li><code>white</code>:  a <code>BitVector</code> of length equal to the number of elements where <code>white[e]</code> is 1 iff the <code>e</code>^th element must not be part of the final design</li><li><code>varind</code>: an <code>AbstractVector{Int}</code> of length equal to the number of elements where <code>varind[e]</code> gives the index of the decision variable corresponding to element <code>e</code>. Because some elements can be fixed to be black or white, not every element has a decision variable associated.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/problem_types.jl#L3-L12">source</a></section></article><h3 id="Test-problems"><a class="docs-heading-anchor" href="#Test-problems">Test problems</a><a id="Test-problems-1"></a><a class="docs-heading-anchor-permalink" href="#Test-problems" title="Permalink"></a></h3><p>The following types are all concrete subtypes of <code>StiffnessTopOptProblem</code>. <code>PointLoadCantilever</code> is a cantilever beam problem with a point load as shown below. <code>HalfMBB</code> is the half Messerschmitt-Bölkow-Blohm (MBB) beam problem commonly used in topology optimization literature. <code>LBeam</code> and <code>TieBeam</code> are the common L-beam and tie-beam test problem used in topology optimization literature. The <code>PointLoadCantilever</code> and <code>HalfMBB</code> problems can be either 2D or 3D depending on the type of the inputs to the constructor. If the number of elements and sizes of elements are 2-tuples, the problem constructed will be 2D. And if they are 3-tuples, the problem constructed will be 3D. For the 3D versions, the point loads are applied at approximately the mid-depth point. The <code>TieBeam</code> and <code>LBeam</code> problems are always 2D.</p><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>PointLoadCantilever</code>. Check Documenter&#39;s build log for details.</p></div></div><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.PointLoadCantilever-Union{Tuple{CellType}, Tuple{dim}, Tuple{Type{Val{CellType}}, Tuple{Vararg{Int64, dim}}, Tuple{Vararg{T, dim}} where T, Any, Any, Any}} where {dim, CellType}" href="#TopOpt.TopOptProblems.PointLoadCantilever-Union{Tuple{CellType}, Tuple{dim}, Tuple{Type{Val{CellType}}, Tuple{Vararg{Int64, dim}}, Tuple{Vararg{T, dim}} where T, Any, Any, Any}} where {dim, CellType}"><code>TopOpt.TopOptProblems.PointLoadCantilever</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">PointLoadCantilever(::Type{Val{CellType}}, nels::NTuple{dim,Int}, sizes::NTuple{dim}, E, ν, force) where {dim, CellType}</code></pre><ul><li><code>dim</code>: dimension of the problem</li><li><code>E</code>: Young&#39;s modulus</li><li><code>ν</code>: Poisson&#39;s ration</li><li><code>force</code>: force at the center right of the cantilever beam (positive is downward)</li><li><code>nels</code>: number of elements in each direction, a 2-tuple for 2D problems and a 3-tuple for 3D problems</li><li><code>sizes</code>: the size of each element in each direction, a 2-tuple for 2D problems and a 3-tuple for 3D problems</li><li><code>CellType</code>: can be either <code>:Linear</code> or <code>:Quadratic</code> to determine the order of the geometric and field basis functions and element type. Only isoparametric elements are supported for now.</li></ul><p>Example:</p><pre><code class="nohighlight hljs">nels = (60,20);
sizes = (1.0,1.0);
E = 1.0;
ν = 0.3;
force = 1.0;

# Linear elements and linear basis functions
celltype = :Linear

# Quadratic elements and quadratic basis functions
#celltype = :Quadratic

problem = PointLoadCantilever(Val{celltype}, nels, sizes, E, ν, force)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/problem_types.jl#L83-L110">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.HalfMBB" href="#TopOpt.TopOptProblems.HalfMBB"><code>TopOpt.TopOptProblems.HalfMBB</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs"> |
 |
 v
O*********************************
O*                               *
O*                               *
O*                               *
O*********************************
                                 O

struct HalfMBB{dim, T, N, M} &lt;: StiffnessTopOptProblem{dim, T}
    rect_grid::RectilinearGrid{dim, T, N, M}
    E::T
    ν::T
    ch::ConstraintHandler{&lt;:DofHandler{dim, &lt;:Cell{dim,N,M}, T}, T}
    force::T
    force_dof::Integer
    black::AbstractVector
    white::AbstractVector
    varind::AbstractVector{Int}
    metadata::Metadata
end</code></pre><ul><li><code>dim</code>: dimension of the problem</li><li><code>T</code>: number type for computations and coordinates</li><li><code>N</code>: number of nodes in a cell of the grid</li><li><code>M</code>: number of faces in a cell of the grid</li><li><code>rect_grid</code>: a RectilinearGrid struct</li><li><code>E</code>: Young&#39;s modulus</li><li><code>ν</code>: Poisson&#39;s ration</li><li><code>force</code>: force at the top left of half the MBB (positive is downward)</li><li><code>force_dof</code>: dof number at which the force is applied</li><li><code>ch</code>: a <code>Ferrite.ConstraintHandler</code> struct</li><li><code>metadata</code>: Metadata having various cell-node-dof relationships</li><li><code>black</code>: a <code>BitVector</code> of length equal to the number of elements where <code>black[e]</code> is 1 iff the <code>e</code>^th element must be part of the final design</li><li><code>white</code>:  a <code>BitVector</code> of length equal to the number of elements where <code>white[e]</code> is 1 iff the <code>e</code>^th element must not be part of the final design</li><li><code>varind</code>: an <code>AbstractVector{Int}</code> of length equal to the number of elements where <code>varind[e]</code> gives the index of the decision variable corresponding to element <code>e</code>. Because some elements can be fixed to be black or white, not every element has a decision variable associated.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/problem_types.jl#L199-L239">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.HalfMBB-Union{Tuple{CellType}, Tuple{dim}, Tuple{Type{Val{CellType}}, Tuple{Vararg{Int64, dim}}, Tuple{Vararg{T, dim}} where T, Any, Any, Any}} where {dim, CellType}" href="#TopOpt.TopOptProblems.HalfMBB-Union{Tuple{CellType}, Tuple{dim}, Tuple{Type{Val{CellType}}, Tuple{Vararg{Int64, dim}}, Tuple{Vararg{T, dim}} where T, Any, Any, Any}} where {dim, CellType}"><code>TopOpt.TopOptProblems.HalfMBB</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">HalfMBB(::Type{Val{CellType}}, nels::NTuple{dim,Int}, sizes::NTuple{dim}, E, ν, force) where {dim, CellType}</code></pre><ul><li><code>dim</code>: dimension of the problem</li><li><code>E</code>: Young&#39;s modulus</li><li><code>ν</code>: Poisson&#39;s ration</li><li><code>force</code>: force at the top left of half the MBB (positive is downward)</li><li><code>nels</code>: number of elements in each direction, a 2-tuple for 2D problems and a 3-tuple for 3D problems</li><li><code>sizes</code>: the size of each element in each direction, a 2-tuple for 2D problems and a 3-tuple for 3D problems</li><li><code>CellType</code>: can be either <code>:Linear</code> or <code>:Quadratic</code> to determine the order of the geometric and field basis functions and element type. Only isoparametric elements are supported for now.</li></ul><p>Example:</p><pre><code class="nohighlight hljs">nels = (60,20);
sizes = (1.0,1.0);
E = 1.0;
ν = 0.3;
force = -1.0;

# Linear elements and linear basis functions
celltype = :Linear

# Quadratic elements and quadratic basis functions
#celltype = :Quadratic

problem = HalfMBB(Val{celltype}, nels, sizes, E, ν, force)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/problem_types.jl#L255-L282">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.LBeam" href="#TopOpt.TopOptProblems.LBeam"><code>TopOpt.TopOptProblems.LBeam</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">////////////
............
.          .
.          .
.          . 
.          .                    
.          ......................
.                               .
.                               . 
.                               . |
................................. v
                                force

struct LBeam{T, N, M} &lt;: StiffnessTopOptProblem{2, T}
    E::T
    ν::T
    ch::ConstraintHandler{&lt;:DofHandler{2, &lt;:Cell{2,N,M}, T}, T}
    force::T
    force_dof::Integer
    black::AbstractVector
    white::AbstractVector
    varind::AbstractVector{Int}
    metadata::Metadata
end</code></pre><ul><li><code>T</code>: number type for computations and coordinates</li><li><code>N</code>: number of nodes in a cell of the grid</li><li><code>M</code>: number of faces in a cell of the grid</li><li><code>E</code>: Young&#39;s modulus</li><li><code>ν</code>: Poisson&#39;s ration</li><li><code>force</code>: force at the center right of the cantilever beam (positive is downward)</li><li><code>force_dof</code>: dof number at which the force is applied</li><li><code>ch</code>: a <code>Ferrite.ConstraintHandler</code> struct</li><li><code>metadata</code>: Metadata having various cell-node-dof relationships</li><li><code>black</code>: a <code>BitVector</code> of length equal to the number of elements where <code>black[e]</code> is 1 iff the <code>e</code>^th element must be part of the final design</li><li><code>white</code>:  a <code>BitVector</code> of length equal to the number of elements where <code>white[e]</code> is 1 iff the <code>e</code>^th element must not be part of the final design</li><li><code>varind</code>: an <code>AbstractVector{Int}</code> of length equal to the number of elements where <code>varind[e]</code> gives the index of the decision variable corresponding to element <code>e</code>. Because some elements can be fixed to be black or white, not every element has a decision variable associated.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/problem_types.jl#L366-L406">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.LBeam-Union{Tuple{Type{Val{CellType}}}, Tuple{CellType}, Tuple{T}, Tuple{Type{Val{CellType}}, Type{T}}} where {T, CellType}" href="#TopOpt.TopOptProblems.LBeam-Union{Tuple{Type{Val{CellType}}}, Tuple{CellType}, Tuple{T}, Tuple{Type{Val{CellType}}, Type{T}}} where {T, CellType}"><code>TopOpt.TopOptProblems.LBeam</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">LBeam(::Type{Val{CellType}}, ::Type{T}=Float64; length = 100, height = 100, upperslab = 50, lowerslab = 50, E = 1.0, ν = 0.3, force = 1.0) where {T, CellType}</code></pre><ul><li><code>T</code>: number type for computations and coordinates</li><li><code>E</code>: Young&#39;s modulus</li><li><code>ν</code>: Poisson&#39;s ration</li><li><code>force</code>: force at the center right of the cantilever beam (positive is downward)</li><li><code>length</code>, <code>height</code>, <code>upperslab</code> and <code>lowerslab</code> are explained in <a href="#TopOpt.TopOptProblems.LGrid"><code>LGrid</code></a>.</li><li><code>CellType</code>: can be either <code>:Linear</code> or <code>:Quadratic</code> to determine the order of the geometric and field basis functions and element type. Only isoparametric elements are supported for now.</li></ul><p>Example:</p><pre><code class="nohighlight hljs">E = 1.0;
ν = 0.3;
force = 1.0;

# Linear elements and linear basis functions
celltype = :Linear

# Quadratic elements and quadratic basis functions
#celltype = :Quadratic

problem = LBeam(Val{celltype}, E = E, ν = ν, force = force)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/problem_types.jl#L420-L444">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.TieBeam" href="#TopOpt.TopOptProblems.TieBeam"><code>TopOpt.TopOptProblems.TieBeam</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">                                                               1
                                                               
                                                              OOO
                                                              ...
                                                              . .
                                                           4  . . 
                                30                            . .   
/ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . &lt;-
/ .                                                                 . &lt;- 2 f 
/ .    3                                                            . &lt;- 
/ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . &lt;-
                                                              ^^^
                                                              |||
                                                              1 f

struct TieBeam{T, N, M} &lt;: StiffnessTopOptProblem{2, T}
    E::T
    ν::T
    force::T
    ch::ConstraintHandler{&lt;:DofHandler{2, N, T, M}, T}
    black::AbstractVector
    white::AbstractVector
    varind::AbstractVector{Int}
    metadata::Metadata
end</code></pre><ul><li><code>T</code>: number type for computations and coordinates</li><li><code>N</code>: number of nodes in a cell of the grid</li><li><code>M</code>: number of faces in a cell of the grid</li><li><code>E</code>: Young&#39;s modulus</li><li><code>ν</code>: Poisson&#39;s ration</li><li><code>force</code>: force at the center right of the cantilever beam (positive is downward)</li><li><code>ch</code>: a <code>Ferrite.ConstraintHandler</code> struct</li><li><code>metadata</code>: Metadata having various cell-node-dof relationships</li><li><code>black</code>: a <code>BitVector</code> of length equal to the number of elements where <code>black[e]</code> is 1 iff the <code>e</code>^th element must be part of the final design</li><li><code>white</code>:  a <code>BitVector</code> of length equal to the number of elements where <code>white[e]</code> is 1 iff the <code>e</code>^th element must not be part of the final design</li><li><code>varind</code>: an <code>AbstractVector{Int}</code> of length equal to the number of elements where <code>varind[e]</code> gives the index of the decision variable corresponding to element <code>e</code>. Because some elements can be fixed to be black or white, not every element has a decision variable associated.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/problem_types.jl#L541-L581">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.TieBeam-Union{Tuple{Type{Val{CellType}}}, Tuple{CellType}, Tuple{T}, Tuple{Type{Val{CellType}}, Type{T}}, Tuple{Type{Val{CellType}}, Type{T}, Any}, Tuple{Type{Val{CellType}}, Type{T}, Any, Any}} where {T, CellType}" href="#TopOpt.TopOptProblems.TieBeam-Union{Tuple{Type{Val{CellType}}}, Tuple{CellType}, Tuple{T}, Tuple{Type{Val{CellType}}, Type{T}}, Tuple{Type{Val{CellType}}, Type{T}, Any}, Tuple{Type{Val{CellType}}, Type{T}, Any, Any}} where {T, CellType}"><code>TopOpt.TopOptProblems.TieBeam</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">TieBeam(::Type{Val{CellType}}, ::Type{T} = Float64, refine = 1, force = T(1); E = T(1), ν = T(0.3)) where {T, CellType}</code></pre><ul><li><code>T</code>: number type for computations and coordinates</li><li><code>E</code>: Young&#39;s modulus</li><li><code>ν</code>: Poisson&#39;s ration</li><li><code>force</code>: force at the center right of the cantilever beam (positive is downward)</li><li><code>refine</code>: an integer value of 1 or greater that specifies the mesh refinement extent. A value of 1 gives the standard tie-beam problem in literature.</li><li><code>CellType</code>: can be either <code>:Linear</code> or <code>:Quadratic</code> to determine the order of the geometric and field basis functions and element type. Only isoparametric elements are supported for now.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/problem_types.jl#L595-L604">source</a></section></article><h3 id="Reading-INP-Files"><a class="docs-heading-anchor" href="#Reading-INP-Files">Reading INP Files</a><a id="Reading-INP-Files-1"></a><a class="docs-heading-anchor-permalink" href="#Reading-INP-Files" title="Permalink"></a></h3><p>In <code>TopOpt.jl</code>, you can import a <code>.inp</code> file to an instance of the problem struct <code>InpStiffness</code>. This can be used to construct problems with arbitrary unstructured ground meshes, complex boundary condition domains and load specifications. The <code>.inp</code> file can be exported from a number of common finite element software such as: FreeCAD or ABAQUS.</p><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.InputOutput.INP.InpStiffness" href="#TopOpt.TopOptProblems.InputOutput.INP.InpStiffness"><code>TopOpt.TopOptProblems.InputOutput.INP.InpStiffness</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct InpStiffness{dim, N, TF, TI, TBool, Tch &lt;: ConstraintHandler, GO, TInds &lt;: AbstractVector{TI}, TMeta&lt;:Metadata} &lt;: StiffnessTopOptProblem{dim, TF}
    inp_content::InpContent{dim, TF, N, TI}
    geom_order::Type{Val{GO}}
    ch::Tch
    black::TBool
    white::TBool
    varind::TInds
    metadata::TMeta
end</code></pre><ul><li><code>dim</code>: dimension of the problem</li><li><code>TF</code>: number type for computations and coordinates</li><li><code>N</code>: number of nodes in a cell of the grid</li><li><code>inp_content</code>: an instance of <a href="reference/@ref"><code>InpContent</code></a> which stores all the information from the `<code>.inp</code> file.</li><li><code>geom_order</code>: a field equal to <code>Val{GO}</code> where <code>GO</code> is an integer representing the order of the finite elements. Linear elements have a <code>geom_order</code> of <code>Val{1}</code> and quadratic elements have a <code>geom_order</code> of <code>Val{2}</code>.</li><li><code>metadata</code>: Metadata having various cell-node-dof relationships</li><li><code>black</code>: a <code>BitVector</code> of length equal to the number of elements where <code>black[e]</code> is 1 iff the <code>e</code>^th element must be part of the final design</li><li><code>white</code>:  a <code>BitVector</code> of length equal to the number of elements where <code>white[e]</code> is 1 iff the <code>e</code>^th element must not be part of the final design</li><li><code>varind</code>: an <code>AbstractVector{Int}</code> of length equal to the number of elements where <code>varind[e]</code> gives the index of the decision variable corresponding to element <code>e</code>. Because some elements can be fixed to be black or white, not every element has a decision variable associated.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/IO/INP/inpstiffness.jl#L1-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.InputOutput.INP.InpStiffness-Tuple{AbstractString}" href="#TopOpt.TopOptProblems.InputOutput.INP.InpStiffness-Tuple{AbstractString}"><code>TopOpt.TopOptProblems.InputOutput.INP.InpStiffness</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">InpStiffness(filepath::AbstractString; keep_load_cells = false)</code></pre><p>Imports stiffness problem from a .inp file, e.g. <code>InpStiffness(&quot;example.inp&quot;)</code>. The <code>keep_load_cells</code> keyword argument will enforce that any cell with a load applied on it is to be part of the final optimal design generated by topology optimization algorithms.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/IO/INP/inpstiffness.jl#L44-L48">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>IO.INP.Parser.InpContent</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Grids"><a class="docs-heading-anchor" href="#Grids">Grids</a><a id="Grids-1"></a><a class="docs-heading-anchor-permalink" href="#Grids" title="Permalink"></a></h2><p>Grid types are defined in <code>TopOptProblems</code> because a number of topology optimization problems share the same underlying grid but apply the loads and boundary conditions at different locations. For example, the <code>PointLoadCantilever</code> and <code>HalfMBB</code> problems use the same rectilinear grid type, <code>RectilinearGrid</code>, under the hood. The <code>LBeam</code> problem uses the <code>LGrid</code> function under the hood to construct an L-shaped <code>Ferrite.Grid</code>. New problem types can be defined using the same grids but different loads or boundary conditions.</p><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.RectilinearGrid" href="#TopOpt.TopOptProblems.RectilinearGrid"><code>TopOpt.TopOptProblems.RectilinearGrid</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct RectilinearGrid{dim, T, N, M, TG&lt;:Ferrite.Grid{dim, &lt;:Ferrite.Cell{dim,N,M}, T}} &lt;: AbstractGrid{dim, T}
    grid::TG
    nels::NTuple{dim, Int}
    sizes::NTuple{dim, T}
    corners::NTuple{2, Vec{dim, T}}
    white_cells::BitVector
    black_cells::BitVector
    constant_cells::BitVector
end</code></pre><p>A type that represents a rectilinear grid with corner points <code>corners</code>.</p><ul><li><code>dim</code>: dimension of the problem</li><li><code>T</code>: number type for computations and coordinates</li><li><code>N</code>: number of nodes in a cell of the grid</li><li><code>M</code>: number of faces in a cell of the grid</li><li><code>grid</code>: a Ferrite.Grid struct</li><li><code>nels</code>: number of elements in every dimension</li><li><code>sizes</code>: dimensions of each rectilinear cell</li><li><code>corners</code>: 2 corner points of the rectilinear grid</li><li><code>white_cells</code>: cells fixed to be void during optimization</li><li><code>black_cells</code>: cells fixed to have material during optimization</li><li><code>constant_cells</code>: cells fixed to be either void or have material during optimization</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/grids.jl#L5-L31">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.RectilinearGrid-Union{Tuple{CellType}, Tuple{T}, Tuple{dim}, Tuple{Type{Val{CellType}}, Tuple{Vararg{Int64, dim}}, Tuple{Vararg{T, dim}}}} where {dim, T, CellType}" href="#TopOpt.TopOptProblems.RectilinearGrid-Union{Tuple{CellType}, Tuple{T}, Tuple{dim}, Tuple{Type{Val{CellType}}, Tuple{Vararg{Int64, dim}}, Tuple{Vararg{T, dim}}}} where {dim, T, CellType}"><code>TopOpt.TopOptProblems.RectilinearGrid</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">RectilinearGrid(::Type{Val{CellType}}, nels::NTuple{dim,Int}, sizes::NTuple{dim,T}) where {dim, T, CellType}</code></pre><p>Constructs an instance of <a href="#TopOpt.TopOptProblems.RectilinearGrid"><code>RectilinearGrid</code></a>.</p><ul><li><code>dim</code>: dimension of the problem</li><li><code>T</code>: number type for coordinates</li><li><code>nels</code>: number of elements in every dimension</li><li><code>sizes</code>: dimensions of each rectilinear cell</li></ul><p>Example:</p><pre><code class="nohighlight hljs">rectgrid = RectilinearGrid((60,20), (1.0,1.0))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/grids.jl#L43-L58">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.LGrid" href="#TopOpt.TopOptProblems.LGrid"><code>TopOpt.TopOptProblems.LGrid</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">LGrid(::Type{Val{CellType}}, ::Type{T}; length = 100, height = 100, upperslab = 50, lowerslab = 50) where {T, CellType}
LGrid(::Type{Val{CellType}}, nel1::NTuple{2,Int}, nel2::NTuple{2,Int}, LL::Vec{2,T}, UR::Vec{2,T}, MR::Vec{2,T}) where {CellType, T}</code></pre><p>Constructs a <code>Ferrite.Grid</code> that represents the following L-shaped grid.</p><pre><code class="nohighlight hljs">        upperslab   UR
       ............
       .          .
       .          .
       .          . 
height .          .                     MR
       .          ......................
       .                               .
       .                               . lowerslab
       .                               .
       .................................
     LL             length

</code></pre><p>Examples:</p><pre><code class="nohighlight hljs">LGrid(upperslab = 30, lowerslab = 70)
LGrid(Val{:Linear}, (2, 4), (2, 2), Vec{2,Float64}((0.0,0.0)), Vec{2,Float64}((2.0, 4.0)), Vec{2,Float64}((4.0, 2.0)))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/grids.jl#L110-L139">source</a></section></article><h2 id="Finite-element-backend"><a class="docs-heading-anchor" href="#Finite-element-backend">Finite element backend</a><a id="Finite-element-backend-1"></a><a class="docs-heading-anchor-permalink" href="#Finite-element-backend" title="Permalink"></a></h2><p>Currently, <code>TopOpt</code> uses <a href="https://github.com/KristofferC/Ferrite.jl"><code>Ferrite.jl</code></a> for FEA-related modeling.  This means that all the problems above are described in the language and types of <code>Ferrite</code>.</p><h2 id="Matrices-and-vectors"><a class="docs-heading-anchor" href="#Matrices-and-vectors">Matrices and vectors</a><a id="Matrices-and-vectors-1"></a><a class="docs-heading-anchor-permalink" href="#Matrices-and-vectors" title="Permalink"></a></h2><h3 id="ElementFEAInfo"><a class="docs-heading-anchor" href="#ElementFEAInfo"><code>ElementFEAInfo</code></a><a id="ElementFEAInfo-1"></a><a class="docs-heading-anchor-permalink" href="#ElementFEAInfo" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.ElementFEAInfo" href="#TopOpt.TopOptProblems.ElementFEAInfo"><code>TopOpt.TopOptProblems.ElementFEAInfo</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ElementFEAInfo{dim, T}
    Kes::AbstractVector{&lt;:AbstractMatrix{T}}
    fes::AbstractVector{&lt;:AbstractVector{T}}
    fixedload::AbstractVector{T}
    cellvolumes::AbstractVector{T}
    cellvalues::CellValues{dim, T}
    facevalues::FaceValues{&lt;:Any, T}
    metadata::Metadata
    black::AbstractVector
    white::AbstractVector
    varind::AbstractVector{Int}
    cells
end</code></pre><p>An instance of the <code>ElementFEAInfo</code> type stores element information such as:</p><ul><li><code>Kes</code>: the element stiffness matrices,</li><li><code>fes</code>: the element load vectors,</li><li><code>cellvolumes</code>: the element volumes,</li><li><code>cellvalues</code> and <code>facevalues</code>: two <code>Ferrite</code> types that facilitate cell and face iteration and queries.</li><li><code>metadata</code>: that stores degree of freedom (dof) to node mapping, dof to cell mapping, etc.</li><li><code>black</code>: a <code>BitVector</code> such that <code>black[i]</code> is 1 iff element <code>i</code> must be part of any feasible design.</li><li><code>white</code>: a <code>BitVector</code> such that <code>white[i]</code> is 1 iff element <code>i</code> must never be part of any feasible design.</li><li><code>varind</code>: a vector such that <code>varind[i]</code> gives the decision variable index of element <code>i</code>.</li><li><code>cells</code>: the cell connectivities.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/elementinfo.jl#L1-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.ElementFEAInfo-Union{Tuple{mat_type}, Tuple{Any, Any, Type{Val{mat_type}}}} where mat_type" href="#TopOpt.TopOptProblems.ElementFEAInfo-Union{Tuple{mat_type}, Tuple{Any, Any, Type{Val{mat_type}}}} where mat_type"><code>TopOpt.TopOptProblems.ElementFEAInfo</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ElementFEAInfo(sp, quad_order=2, ::Type{Val{mat_type}}=Val{:Static}) where {mat_type}</code></pre><p>Constructs an instance of <code>ElementFEAInfo</code> from a stiffness problem <code>sp</code> using a Gaussian quadrature order of <code>quad_order</code>. The element matrix and vector types will be:</p><ol><li><code>SMatrix</code> and <code>SVector</code> if <code>mat_type</code> is <code>:SMatrix</code> or <code>:Static</code>, the default,</li><li><code>MMatrix</code> and <code>MVector</code> if <code>mat_type</code> is <code>:MMatrix</code>, or</li><li><code>Matrix</code> and <code>Vector</code> otherwise.</li></ol><p>The static matrices and vectors are more performant and GPU-compatible therefore they are used by default.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/elementinfo.jl#L48-L57">source</a></section></article><h3 id="GlobalFEAInfo"><a class="docs-heading-anchor" href="#GlobalFEAInfo"><code>GlobalFEAInfo</code></a><a id="GlobalFEAInfo-1"></a><a class="docs-heading-anchor-permalink" href="#GlobalFEAInfo" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.GlobalFEAInfo" href="#TopOpt.TopOptProblems.GlobalFEAInfo"><code>TopOpt.TopOptProblems.GlobalFEAInfo</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct GlobalFEAInfo{T, TK&lt;:AbstractMatrix{T}, Tf&lt;:AbstractVector{T}, Tchol}
    K::TK
    f::Tf
    cholK::Tchol
end</code></pre><p>An instance of <code>GlobalFEAInfo</code> hosts the global stiffness matrix <code>K</code>, the load vector <code>f</code> and the cholesky decomposition of the <code>K</code>, <code>cholK</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/elementinfo.jl#L90-L98">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.GlobalFEAInfo-Union{Tuple{}, Tuple{Type{T}}, Tuple{T}} where T" href="#TopOpt.TopOptProblems.GlobalFEAInfo-Union{Tuple{}, Tuple{Type{T}}, Tuple{T}} where T"><code>TopOpt.TopOptProblems.GlobalFEAInfo</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">GlobalFEAInfo(::Type{T}=Float64) where {T}</code></pre><p>Constructs an empty instance of <code>GlobalFEAInfo</code> where the field <code>K</code> is an empty sparse matrix of element type <code>T</code> and the field <code>f</code> is an empty dense vector of element type <code>T</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/elementinfo.jl#L108-L112">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TopOpt.TopOptProblems.GlobalFEAInfo-Tuple{StiffnessTopOptProblem}" href="#TopOpt.TopOptProblems.GlobalFEAInfo-Tuple{StiffnessTopOptProblem}"><code>TopOpt.TopOptProblems.GlobalFEAInfo</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">GlobalFEAInfo(sp::StiffnessTopOptProblem)</code></pre><p>Constructs an instance of <code>GlobalFEAInfo</code> where the field <code>K</code> is a sparse matrix with the correct size and sparsity pattern for the problem instance <code>sp</code>. The field <code>f</code> is a dense vector of the appropriate size. The values in <code>K</code> and <code>f</code> are meaningless though and require calling the function <code>assemble!</code> to update.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTopOpt/TopOpt.jl/blob/594fd6d4bf459e5ff46255797ce40d18359293dd/src/TopOptProblems/elementinfo.jl#L118-L122">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../examples/global_stress/">« Global stress objective example</a><a class="docs-footer-nextpage" href="../Algorithms/"><code>Algorithms</code> »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Thursday 2 December 2021 21:48">Thursday 2 December 2021</span>. Using Julia version 1.7.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
